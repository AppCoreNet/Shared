<Project>
  <PropertyGroup>
    <RestoreSources>
      $(ExtraRestoreSources);
      $(RestoreSources);
      https://api.nuget.org/v3/index.json
    </RestoreSources>

    <!-- CI build restore sources -->
    <RestoreSources Condition=" '$(CI)'=='true' ">
      $(RestoreSources)
    </RestoreSources>

    <!-- local build restore sources -->
    <LocalPackageDirectory Condition=" '$(LocalPackageDirectory)' == '' ">$(MSBuildThisFileDirectory)/../../Packages</LocalPackageDirectory>
    <RestoreSources Condition=" '$(CI)' != 'true' And Exists($(LocalPackageDirectory)) ">
      $(LocalPackageDirectory);
      $(RestoreSources)
    </RestoreSources>
  </PropertyGroup>
</Project>