parameters:
  configuration: 'Debug'
  
steps:
- pwsh: ./build.ps1 -Configuration ${{ parameters.configuration }} -CI
  displayName: Build
- pwsh: ./test.ps1 -Configuration ${{ parameters.configuration }}
  displayName: Run Tests
- task: PublishTestResults@2
  displayName: Publish Test Results
  inputs:
    testRunner: VSTest
    testResultsFiles: '**/*.trx'
    failTaskOnFailedTests: true
    buildConfiguration: ${{ parameters.configuration }}
